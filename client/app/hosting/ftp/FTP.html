<div class="container-fluid px-0" data-ng-controller="HostingTabFTPCtrl as ctrlHostingTabFTP">
    <div class="loader mt-5 text-center" aria-label="{{i18n.common_loading}}" data-ng-if="ctrlHostingTabFTP.loading.init"></div>

    <div class="row" data-ng-if="!ctrlHostingTabFTP.loading.init">
        <!-- Doesnt have multiftp option -->
        <div class="col-md-9">
            <!-- PERSO  -->
            <div data-ng-if="ctrlHostingTabFTP.ftpInformations.hasMultiFtp === false">
                <div class="row mb-5 d-md-flex">
                    <div class="col-md-6">
                        <div class="oui-tile h-100">
                            <h3 class="oui-tile__title" data-i18n-static="hosting_tab_FTP_dashboard_server_header"></h3>
                            <div class="oui-tile__body">
                                <ul class="list-unstyled">
                                    <li class="oui-tile__item">
                                        <div class="oui-tile__definition">
                                            <strong class="d-block" data-i18n-static="hosting_tab_FTP_dashboard_server"></strong>
                                            <p data-ng-bind="ctrlHostingTabFTP.firstUser.ftp.url"></p>
                                        </div>
                                    </li>
                                    <li class="oui-tile__item">
                                        <div class="oui-tile__definition">
                                            <strong class="d-block" data-i18n-static="hosting_tab_FTP_dashboard_server_port"></strong>
                                            <p data-ng-bind="ctrlHostingTabFTP.firstUser.ftp.port"></p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="oui-tile h-100">
                            <h3 class="oui-tile__title" data-i18n-static="hosting_tab_FTP_dashboard_other_data_header"></h3>
                            <div class="oui-tile__body">
                                <ul class="list-unstyled">
                                    <li class="oui-tile__item">
                                        <div class="oui-tile__definition">
                                            <strong class="d-block" data-i18n-static="hosting_tab_FTP_dashboard_home_location"></strong>
                                            <p data-ng-bind="'/home/' + ctrlHostingTabFTP.ftpInformations.primaryLogin"></p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="alert alert-info" role="alert">
                    <div>
                        <span data-i18n-static="hosting_tab_FTP_configuration_offer_upgrade"></span>
                        <div class="mt-4">
                            <button class="btn btn-info" type="button"
                                    data-i18n-static="hosting_dashboard_service_change_offer"
                                    data-ng-click="setAction('offer/upgrade/hosting-offer-upgrade')"></button>
                        </div>
                    </div>
                </div>

                <div class="loader mt-5 text-center" aria-label="{{i18n.common_loading}}" data-ng-if="ctrlHostingTabFTP.loading.ftp"></div>

                <div class="alert alert-info"
                     role="alert"
                     data-i18n-static="hosting_tab_FTP_multiftp_table_header_empty"
                     data-ng-if="!ctrlHostingTabFTP.loading.ftp && !ctrlHostingTabFTP.ftpInformations.list.results.length">
                </div>

                <div class="table-responsive mt-5" data-ng-if="!ctrlHostingTabFTP.loading.ftp && ctrlHostingTabFTP.ftpInformations.list.results.length > 0">
                    <table class="table table-hover table-striped">
                        <thead>
                            <tr>
                                <th scope="col" data-i18n-static="hosting_tab_FTP_multiftp_table_header_login"></th>
                                <th scope="col" data-i18n-static="hosting_tab_FTP_multiftp_table_header_home"></th>
                                <th scope="col" data-i18n-static="hosting_tab_FTP_configuration_user_create_step2_password_password"></th>
                                <th scope="col" data-i18n-static="hosting_tab_FTP_multiftp_table_header_sftp_state"></th>
                                <th scope="col" data-i18n-static="hosting_tab_FTP_multiftp_table_header_state"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-ng-repeat="element in ctrlHostingTabFTP.ftpInformations.list.results track by $index">
                                <th scope="row" data-ng-bind="::element.login"></th>
                                <td data-ng-bind="::element.home"></td>
                                <td>
                                    <div class="text-nowrap" data-ng-show="!ctrlHostingTabFTP.editMode">
                                        *****************
                                        <button class="btn btn-icon"
                                                type="button"
                                                title="{{::i18n.hosting_tab_FTP_configuration_user_create_step2_password_password}} : {{::i18n.wizard_modify}}"
                                                data-ng-click="ctrlHostingTabFTP.editMode = true">
                                            <span class="oui-icon oui-icon-pen_line oui-icon_small" aria-hidden="true"></span>
                                        </button>
                                    </div>
                                    <div class="form-group" data-ng-show="ctrlHostingTabFTP.editMode">
                                        <div class="input-group">
                                            <input type="password"
                                                   class="form-control"
                                                   autocomplete="off"
                                                   data-ng-model="ctrlHostingTabFTP.password.value">
                                            <div class="input-group-btn">
                                                <button class="btn btn-success"
                                                        type="button"
                                                        title="{{::i18n.hosting_tab_FTP_configuration_user_create_step2_password_password}} : {{i18n.wizard_confirm}}"
                                                        data-ng-click="ctrlHostingTabFTP.changePassword()"
                                                        data-ng-disabled="!ctrlHostingTabFTP.isPasswordValid()">
                                                    <span class="fa fa-check" aria-hidden="true"></span>
                                                </button>
                                                <button class="btn btn-danger"
                                                        type="button"
                                                        title="{{::i18n.hosting_tab_FTP_configuration_user_create_step2_password_password}} : {{i18n.wizard_cancel}}"
                                                        data-ng-click="ctrlHostingTabFTP.resetPassword()">
                                                    <span class="fa fa-times" aria-hidden="true"></span>
                                                </button>
                                            </div>
                                        </div>
                                        <small class="d-block mt-2"
                                                data-ng-bind-html="tr('hosting_common_password_conditions', [ctrlHostingTabFTP.condition.min, ctrlHostingTabFTP.condition.max])"></small>
                                    </div>
                                </td>
                                <td>
                                    <div class="checkbox" data-ng-class="{'my-0': !ctrlHostingTabFTP.editMode}" data-ng-if="ctrlHostingTabFTP.allowUpdateState">
                                        <label>
                                            <input type="checkbox"
                                                   data-ng-change="ctrlHostingTabFTP.updatePrimaryLoginState(element, prevSshState)"
                                                   data-ng-model="element.sshState"
                                                   data-ng-true-value="'sftponly'"
                                                   data-ng-false-value="'none'"
                                                   data-ng-init="prevSshState = { sshState : element.sshState }">
                                            <span data-ng-if="element.sshState === 'sftponly'" data-i18n-static="common_activated"></span>
                                            <span data-ng-if="element.sshState === 'none'" data-i18n-static="common_desactivated"></span>
                                        </label>
                                    </div>
                                    <div data-ng-if="!ctrlHostingTabFTP.allowUpdateState">
                                        <span class="fa fa-spinner fa-spin mr-2" aria-hidden="true"></span>
                                        <span data-i18n-static="hosting_tab_FTP_update"></span>
                                    </div>
                                </td>
                                <td>
                                    <div class="checkbox" data-ng-class="{'my-0': !ctrlHostingTabFTP.editMode}" data-ng-if="ctrlHostingTabFTP.allowUpdateState">
                                        <label>
                                            <input type="checkbox"
                                                   data-ng-change="ctrlHostingTabFTP.updatePrimaryLoginState(element, prevState)"
                                                   data-ng-model="element.state"
                                                   data-ng-true-value="'rw'"
                                                   data-ng-false-value="'off'"
                                                   data-ng-init="prevState = { state : element.state }">
                                            <span data-ng-if="element.state === 'rw'" data-i18n-static="common_activated"></span>
                                            <span data-ng-if="element.state === 'off'" data-i18n-static="common_desactivated"></span>
                                        </label>
                                    </div>
                                    <div data-ng-if="!ctrlHostingTabFTP.allowUpdateState">
                                        <div class="fa fa-spinner fa-spin mr-2" aria-hidden="true"></div>
                                        <span data-i18n-static="hosting_tab_FTP_update"></span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- PRO / PERF  -->
            <div class="row" data-ng-if="ctrlHostingTabFTP.ftpInformations.hasMultiFtp">
                <div class="row mb-5 d-md-flex mx-0">
                    <div class="col-md-4">
                        <div class="oui-tile h-100">
                            <h3 class="oui-tile__title" data-i18n-static="hosting_tab_FTP_dashboard_server_header"></h3>
                            <div class="oui-tile__body">
                                <ul class="list-unstyled">
                                    <li class="oui-tile__item">
                                        <div class="oui-tile__definition">
                                            <strong class="d-block" data-i18n-static="hosting_tab_FTP_dashboard_server"></strong>
                                            <p data-ng-bind="ftp.url"></p>
                                        </div>
                                    </li>
                                    <li class="oui-tile__item">
                                        <div class="oui-tile__definition">
                                            <strong class="d-block" data-i18n-static="hosting_tab_FTP_dashboard_server_port"></strong>
                                            <p data-ng-bind="ftp.port"></p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="oui-tile h-100">
                            <h3 class="oui-tile__title" data-i18n-static="hosting_dashboard_service_home_ssh_header"></h3>
                            <div class="oui-tile__body">
                                <ul class="list-unstyled">
                                    <li class="oui-tile__item">
                                        <div class="oui-tile__definition">
                                            <strong class="d-block" data-i18n-static="hosting_dashboard_service_home_ssh"></strong>
                                            <p data-ng-bind="ssh.url"></p>
                                        </div>
                                    </li>
                                    <li class="oui-tile__item">
                                        <div class="oui-tile__definition">
                                            <strong class="d-block" data-i18n-static="hosting_dashboard_service_home_ssh_port"></strong>
                                            <p data-ng-bind="ssh.port"></p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="oui-tile h-100">
                            <h3 class="oui-tile__title" data-i18n-static="hosting_tab_FTP_dashboard_other_data_header"></h3>
                            <div class="oui-tile__body">
                                <ul class="list-unstyled">
                                    <li class="oui-tile__item">
                                        <div class="oui-tile__definition">
                                            <strong class="d-block" data-i18n-static="hosting_tab_FTP_dashboard_clusterip"></strong>
                                            <p data-ng-bind="ctrlHostingTabFTP.ftpInformations.hostingIp"></p>
                                        </div>
                                    </li>
                                    <li class="oui-tile__item">
                                        <div class="oui-tile__definition">
                                            <strong class="d-block" data-i18n-static="hosting_tab_FTP_dashboard_login"></strong>
                                            <p data-ng-bind="ctrlHostingTabFTP.ftpInformations.primaryLogin"></p>
                                        </div>
                                    </li>
                                    <li class="oui-tile__item">
                                        <div class="oui-tile__definition">
                                            <strong class="d-block" data-i18n-static="hosting_tab_FTP_dashboard_home_location"></strong>
                                            <p data-ng-bind="'/home/' + hosting.primaryLogin"></p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div data-ng-if="ctrlHostingTabFTP.ftpInformations.hasMultiFtp">
                <div class="loader text-center" aria-label="{{i18n.common_loading}}" data-ng-if="ctrlHostingTabFTP.loading.init"></div>

                <div class="alert alert-info"
                     role="alert"
                     data-i18n-static="hosting_tab_FTP_multiftp_table_header_empty"
                     data-ng-if="!ctrlHostingTabFTP.loading.init && !ctrlHostingTabFTP.hasResult">
                </div>

                <div data-ng-if="!ctrlHostingTabFTP.loading.init && ctrlHostingTabFTP.hasResult">
                    <div class="mb-3">
                        <form class="form-inline d-md-flex justify-content-md-end" name="searchFtpForm">
                            <div class="form-group">
                                <label class="sr-only" for="searchFtp" data-ng-i18n-static="common_search"></label>
                                <div class="input-group">
                                    <input type="text"
                                           class="form-control"
                                           id="searchFtp"
                                           name="searchFtp"
                                           placeholder="{{::i18n.hosting_tab_DOMAINS_search_placeholder}}"
                                           data-ng-change="ctrlHostingTabFTP.goSearch()"
                                           data-ng-model="ctrlHostingTabFTP.search.value"
                                           data-ng-model-options="{ debounce: 800 }">
                                    <div class="input-group-btn" data-ng-if="ctrlHostingTabFTP.search.value">
                                        <button class="btn btn-default" type="button" aria-label="{{i18n.common_cancel}}"
                                                data-ng-click="ctrlHostingTabFTP.resetSearch()">
                                            <span class="fa fa-times" aria-hidden="true"></span>
                                        </button>
                                    </div>
                                    <span class="input-group-addon" data-ng-if="!ctrlHostingTabFTP.search.value">
                                        <span class="fa fa-search" aria-hidden="true"></span>
                                    </span>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- Have multiftp option -->
                    <div class="table-responsive">
                        <table class="table"
                                data-ng-class="{'table-hover table-striped': !ctrlHostingTabFTP.loading.ftp && ctrlHostingTabFTP.ftpInformations.list.results.length}">
                            <thead>
                                <tr>
                                    <th scope="col" data-i18n-static="hosting_tab_FTP_multiftp_table_header_login"></th>
                                    <th scope="col" data-i18n-static="hosting_tab_FTP_multiftp_table_header_home"></th>
                                    <th scope="col" class="min-width text-right">
                                        <button class="btn btn-icon"
                                                type="button"
                                                title="{{i18n.refresh}}"
                                                data-ng-click="ctrlHostingTabFTP.refreshTable()">
                                            <span class="fa fa-refresh" aria-hidden="true"></span>
                                        </button>
                                    </th>
                                </tr>
                            </thead>

                            <tbody data-ng-if="ctrlHostingTabFTP.loading.ftp">
                                <tr>
                                    <td class="loader text-center" colspan="3" aria-label="{{i18n.common_loading}}"></td>
                                </tr>
                            </tbody>

                            <tbody data-ng-if="!ctrlHostingTabFTP.loading.ftp && !ctrlHostingTabFTP.ftpInformations.list.results.length">
                                <tr>
                                    <td class="text-center" colspan="3" data-i18n-static="table_search_noresult"></td>
                                </tr>
                            </tbody>

                            <tbody data-ng-if="!ctrlHostingTabFTP.loading.ftp && ctrlHostingTabFTP.ftpInformations.list.results.length > 0">
                                <tr data-ng-repeat="element in ctrlHostingTabFTP.ftpInformations.list.results track by $index">
                                    <th scope="row" data-ng-bind="element.login"></th>

                                    <td data-ng-bind="element.home"></td>

                                    <td class="text-center">
                                        <button class="btn btn-icon"
                                                type="button"
                                                title="{{element.login}} : {{i18n.global_configuration}}"
                                                data-linkedpopover="hosting/popover/multiftp.html"
                                                data-linkedpopover-placement="left"
                                                data-linkedpopover-single="true"
                                                data-linkedpopover-remote="true"
                                                data-linkedpopover-title="{{i18n.common_actions}}">
                                            <span class="oui-icon oui-icon-gear_line oui-icon_small" aria-hidden="true"></span>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="clearfix"
                     data-ng-show="!ctrlHostingTabFTP.loading.init && ctrlHostingTabFTP.hasResult"
                     data-pagination-server-side
                     data-pagination-server-side-function="loadFtpInformations"
                     data-pagination-server-side-paginated-stuff="ctrlHostingTabFTP.ftpInformations"
                     data-pagination-server-side-table-loading="ctrlHostingTabFTP.loading.ftp">
                </div>
            </div>
        </div>

        <div class="col-md-3 mt-5 mt-lg-0">
            <button class="btn btn-block btn-default"
                    type="button"
                    data-i18n-static="hosting_tab_FTP_configuration_restore_snapshot_title_button"
                    data-ng-click="setAction('ftp/snapshot/restore/hosting-ftp-snapshot-restore')"
                    data-ng-disabled="ctrlHostingTabFTP.disableRestoreFtp"
                    data-ng-if="ctrlHostingTabFTP.displayRestoreFtp">
            </button>
            <button class="btn btn-block btn-default"
                    type="button"
                    data-i18n-static="hosting_tab_FTP_configuration_user_create_title_button"
                    data-ng-click="setAction('ftp/user/add/hosting-ftp-user-add', { primaryLogin: ctrlHostingTabFTP.ftpInformations.primaryLogin, operatingSystem: ctrlHostingTabFTP.ftpInformations.operatingSystem })"
                    data-ng-if="ctrlHostingTabFTP.ftpInformations.hasMultiFtp">
            </button>
            <button class="btn btn-block btn-default"
                    type="button"
                    data-i18n-static="hosting_tab_FTP_configuration_explorer_title"
                    data-ng-click="ctrlHostingTabFTP.openFtpExplorer()"
                    data-ng-if="ctrlHostingTabFTP.displayFtpExplorer">
            </button>
        </div>
    </div>
</div>
